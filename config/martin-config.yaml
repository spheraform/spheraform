# Martin v1.0+ tile server configuration
# Supports both PostGIS (legacy) and PMTiles (S3) sources

# PostgreSQL connection and auto-discovery
postgres:
  connection_string: "postgresql://spheraform:spheraform_dev@postgres:5432/spheraform"
  auto_publish:
    tables:
      pattern: "cache_%"
      source_id_format: "{table}"
      geometry_column: "geom"
      srid: 3857

# PMTiles sources from object storage
# Supports: s3://, gs://, az://, file://, https://
pmtiles:
  # Auto-discover all PMTiles files from MinIO/S3 using glob pattern
  # For docker-compose local dev: hardcoded path
  # For Kubernetes: generated from Helm values
  paths:
    - "s3://spheraform/datasets/**/*.pmtiles"

  # MinIO credentials for docker-compose
  access_key_id: "minioadmin"
  secret_access_key: "minioadmin"
  endpoint_url: "http://minio:9000"
  region: "us-east-1"
  allow_http: true
  virtual_hosted_style_request: false  # Path-style for MinIO
